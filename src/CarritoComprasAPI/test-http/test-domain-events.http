### Pruebas de API con Eventos de Dominio
### Base URL
@baseUrl = http://localhost:5063/api

### 1. Crear un producto (debería disparar evento ProductoCreado)
POST {{baseUrl}}/productos
Content-Type: application/json

{
  "nombre": "Laptop Gaming",
  "descripcion": "Laptop para gaming de alta gama",
  "precio": 1500.00,
  "stock": 10,
  "categoria": "Electrónicos"
}

### 2. Crear otro producto
POST {{baseUrl}}/productos
Content-Type: application/json

{
  "nombre": "Mouse Gaming",
  "descripcion": "Mouse óptico para gaming",
  "precio": 50.00,
  "stock": 5,
  "categoria": "Accesorios"
}

### 3. Obtener todos los productos
GET {{baseUrl}}/productos

### 4. Crear un carrito agregando un item (debería disparar eventos CarritoCreado e ItemAgregadoAlCarrito)
POST {{baseUrl}}/carrito/usuario123/items
Content-Type: application/json

{
  "productoId": 1,
  "cantidad": 2
}

### 5. Agregar otro item al carrito
POST {{baseUrl}}/carrito/usuario123/items
Content-Type: application/json

{
  "productoId": 2,
  "cantidad": 3
}

### 6. Intentar agregar más cantidad de la disponible (debería disparar evento ProductoSinStockSuficiente)
POST {{baseUrl}}/carrito/usuario123/items
Content-Type: application/json

{
  "productoId": 2,
  "cantidad": 10
}

### 7. Obtener carrito del usuario
GET {{baseUrl}}/carrito/usuario123

### 8. Actualizar cantidad de un item en el carrito
PUT {{baseUrl}}/carrito/usuario123/items/1
Content-Type: application/json

{
  "cantidad": 1
}

### 9. Eliminar un item del carrito
DELETE {{baseUrl}}/carrito/usuario123/items/2

### 10. Vaciar carrito (debería disparar evento CarritoVaciado)
DELETE {{baseUrl}}/carrito/usuario123

### 11. Actualizar precio de un producto (debería disparar evento PrecioProductoCambiado)
PUT {{baseUrl}}/productos/1
Content-Type: application/json

{
  "nombre": "Laptop Gaming Pro",
  "descripcion": "Laptop para gaming de alta gama - Actualizada",
  "precio": 1200.00,
  "stock": 8,
  "categoria": "Electrónicos"
}

### 12. Eliminar un producto (debería disparar evento ProductoEliminado)
DELETE {{baseUrl}}/productos/2
